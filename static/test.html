<!doctype html>
<html lang="en">
  <head>
    <title><%=title%></title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/navbar.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100italic,300,300italic,regular,italic,500,500italic,700,700italic,900,900italic" rel="stylesheet" />
      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  
    <header>
        <p>Скрипты продаж</p>
        <hr>
    </header>
    <heading>
        <p>Редактор : Продажа седельный тягач</p>
        <hr>
    </heading>
    <content>
        
        <main>

                
            <!-- * Основной раздел -->    
            <div class="maincontent">
              <p>Content</p>
            </div>
        </main>
        <!-- * Тут менюшка -->
        <nav> 
          <ul id ="ulMenuNavbar">

          </ul>
        </nav>
    </content>

    <script>
      var json = {
        "1239123.bitrix.kz": [
          {
            name: "Прод123ажа седельный тягач",
            text: "Веселый текст для оператора",
            answers: [
              {
                name: "Да, у меня есть свободное время",
                text: "Веселый текст для оператора",
                answers: [
                  {
                    name: "Продолжайте",
                    text: "Веселый текст для оператора",
                    answers: [],
                  },
                ],
              },
              {
                name: "Нет, я занят(-а)",
                text: "Веселый текст для оператора",
                answers: [
                  {
                    name: "Я занят, пока",
                    text: "Веселый текст для оператора",
                    answers: [],
                  },
                ],
              },
            ],
          },
          {
            name: "Поставка оружия в афганистан",
            text: "Веселый текст для оператора",
            answers: [
              {
                name: "Assalamualaikum",
                text: "Веселый текст для оператора",
                answers: [],
              },
            ],
          },
        ],
      };
      </script>

    <script>
      var navBar = "";

      makeTree(json["1239123.bitrix.kz"]);

      $('#ulMenuNavbar').append(navBar);

      function makeTree(data) {
        for (var i in data) {
          navBar += (`<li><ul>`);
          tree(data[i]);
          navBar += (`</li></ul>`);
        }
      }

      function tree(data) {
        if (typeof data == "object") {
          navBar += ("<li>");
          if (data["answers"] != undefined && data["answers"].length > 0) {
            navBar += (
              `<a id=""  style="display: inline-block; cursor:pointer;" class="slide header closed"><div class="button-closed" id="titlemenu">+</div></a>`
            );
          } else {
          }
          navBar += (
            `<a href="test.html/?pageName=${encodeURI(data["name"])}">${
              data["name"]
            }</a>`
          );
          if (data["answers"] != undefined && data["answers"].length > 0) {
            navBar += (`<ul class="slideContent" >`);
            for (var i in data["answers"]) {
              tree(data["answers"][i]);
            }
            navBar += (`</ul>`);
          }
          navBar += (`</li>`);
        } else {
        }
      }
      $("#initialSlider").parent().children(".slideContent").slideToggle();
      $(document).ready(function () {
        $(".slide").click(function () {
          if ($(this).text() == "-") {
            $(this).children("div").text("+");
            $(this).children("div").removeClass("closed");
          } else {
            $(this).children("div").text("-");
            $(this).children("div").addClass("closed");
          }

          var target = $(this).parent().children(".slideContent");
          $(target).slideToggle();
        });
      });
    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>